if (can_take_damage) {
    global.life -= 1;
    can_take_damage = false;
    is_damaged = true;
}